<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><title>C/C&#43;&#43; 指针 | Stone Cave</title><meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1"><link rel="canonical" href="https://masonxu.xyz/posts/2.7-cc&#43;&#43;-pointer/"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/ocean.min.css" rel="stylesheet"><link rel="stylesheet" href="https://masonxu.xyz/css/index-128431572d.css"><link href="https://masonxu.xyz/index.xml" rel="alternate" type="application/rss+xml" title="Stone Cave"><link href="https://masonxu.xyz/index.xml" rel="feed" type="application/rss+xml" title="Stone Cave"><link href="https://masonxu.xyz/favicon.ico" rel="shortcut icon"><script>window.baseURL = 'https:\/\/masonxu.xyz';</script></head><body><div class="navbar-fixed"><nav class="navbar"><div class="nav-container container"><div class="nav-wrapper inner"><a href="javascript:void(0)" data-activates="sidebar" class="button-collapse hide-on-large-only"><i class="material-icons">menu</i> </a><a href="https://masonxu.xyz" class="brand-logo"><i class="material-icons hide-on-med-and-down">restaurant_menu</i> Stone Cave</a><ul class="nav-menu tabs tabs-transparent hide-on-med-and-down"><li class="tab"><a href="https://masonxu.xyz/" class="">Home</a></li><li class="tab"><a href="https://masonxu.xyz/archive/" class="">Archive</a></li><li class="tab"><a href="https://masonxu.xyz/about/" class="">About</a></li></ul><form class="nav-form hide-on-small-and-down"><div class="form-group"><i class="material-icons">search</i> <input type="text" placeholder="输入搜索关键字"></div><div class="form-popout"><div class="search-result"><label>暂无搜索结果</label><ul></ul></div></div></form><ul class="nav-menu apps"><li><a class="search-btn hide-on-med-and-up" href="#search-panel"><i class="material-icons">search</i></a></li><li><a class="term-btn hide-on-small-and-down" href="#term-panel"><i class="material-icons">apps</i></a></li><li><a class="rss-btn hide-on-small-and-down" href="https://masonxu.xyz/index.xml" target="_blank"><i class="material-icons">rss_feed</i></a></li></ul></div></div></nav></div><div class="mobile-search hide-on-med-and-up"><div class="header"><i class="material-icons">search</i> <input type="text" placeholder="输入搜索关键字"> <i class="material-icons mobile-search-close">cancel</i></div><div class="content"><label>暂无搜索结果</label><ul></ul></div></div><div class="taxonomy"><div class="container"><div class="inner"><div class="taxonomy-panel row"><div class="col s6"><label>Category</label><ul><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/android%E9%9A%8F%E7%AC%94">android随笔 <span class="badge">6</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/data-structure">data-structure <span class="badge">4</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/datastructure">datastructure <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/git">git <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/pat">pat <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/categories/%E6%9D%82%E8%AE%B0">杂记 <span class="badge">1</span></a></li></ul></div><div class="col s6"><label>Tag</label><ul><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/android">android <span class="badge">5</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/data-sturcture">data-sturcture <span class="badge">4</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/android-values">android-values <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/dialog">dialog <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/edittext">edittext <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/git">git <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/github">github <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/gradle">gradle <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/list">list <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/pat">pat <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/queue">queue <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/stack">stack <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/studio">studio <span class="badge">1</span></a></li><li><a class="btn btn-secondary" href="https://masonxu.xyz/tags/%E6%80%BB%E7%BB%93">总结 <span class="badge">1</span></a></li></ul></div></div></div></div></div><ul class="side-nav" id="sidebar"><li><a href="https://masonxu.xyz/" class="">Home</a></li><li><a href="https://masonxu.xyz/archive/" class="">Archive</a></li><li><a href="https://masonxu.xyz/about/" class="">About</a></li><li><a class="term-btn-mobile hide-on-med-only" href="https://masonxu.xyz/categories/">Categories</a></li><li><a class="term-btn-mobile hide-on-med-only" href="https://masonxu.xyz/tags/">Tags</a></li><li><a class="rss-btn-mobile hide-on-med-only" href="https://masonxu.xyz/index.xml" target="_blank">Rss</a></li></ul><main id="single" role="main" class="main-panel"><section class="container"><div class="inner"><section class="post-wrapper"><div class="toc-panel"><nav id="TableOfContents"><ul><li><a href="#指针">指针</a><ul><li><a href="#什么是指针">什么是指针</a></li><li><a href="#指针变量">指针变量</a></li><li><a href="#指针与数组">指针与数组</a></li><li><a href="#使用指针变量作为函数参数">使用指针变量作为函数参数</a></li><li><a href="#引用">引用</a><ul><li><a href="#引用的含义">引用的含义</a></li><li><a href="#指针的引用">指针的引用</a></li></ul></li></ul></li></ul></nav></div><div class="post reveal"><div class="card"><section class="breadcrumb-wrapper"><div class="breadcrumbs" role="navigation" aria-label="breadcrumbs navigation"><a class="breadcrumb" href="https://masonxu.xyz"><i class="material-icons">location_on</i>Home</a> <a class="breadcrumb" href="https://masonxu.xyz/posts/">Posts</a> <span class="breadcrumb">C/C&#43;&#43; 指针</span></div></section><div class="card-content"><section class="metadata-wrapper"><span class="card-title">C/C&#43;&#43; 指针 </span><span class="card-meta"><time><span>Thu Jan 25 2018</span></time><address><a href="https://masonxu.xyz/categories/pat">PAT</a>&nbsp;</address></span></section><article class="article"><h1 id="指针">指针</h1><h2 id="什么是指针">什么是指针</h2><ul><li>指针就是变量的地址 (不严谨)</li><li>指针是一个unsigned类型的整数</li></ul><h2 id="指针变量">指针变量</h2><ul><li>指针变量是用来存放指针的(也可以理解程地址)</li><li><p>在数据类型后面加 <code>*</code> 表示这是一个指针变量.或者在变量前加 <code>*</code> ,都是可以的</p></li><li><p>给指针变量赋值</p><ul><li>把变量的地址取出来,然后赋给对应类型的指针变量. <code>&amp;</code> 是取址运算符</li><li><strong>注意</strong> : 地址 <code>&amp;a</code>是赋值给<code>p</code>而不是<code>*p</code>的.因为允许 * 放在变量前面,<code>p</code>才是变量,容易混淆. 只要知道星号是类型的一部分就可以. <code>c++ int a; int *p = &amp;a;</code></li></ul></li><li><p>现在指针变量 <code>p</code> 存放了<code>a</code>的地址.如何通过<code>p</code> 获取变量<code>a</code>呢? 把 <code>*</code> 视作 开启房间的钥匙,放在 <code>p</code> 前面,就可以获取变量a的值</p><pre><code class="language-c++">#include&lt;cstdio&gt;
int main(){
    int a;
    int *p  = &amp;a;
    a = 233;
    printf(&quot;%d\n&quot;,*p);
    return 0;
}

输出结果:
233
</code></pre></li><li><p>对 <code>*p</code> 直接赋值,地址没有改变,改变了房间内的元素,<code>a</code> 也改变</p><pre><code class="language-c++">#include&lt;cstdio&gt;
int main(){
    int a;
    int *p  = &amp;a;
    *p = 233;
    printf(&quot;%d,%d\n&quot;,*p,a);
    return 0;
}

输出结果:
233,233
</code></pre></li><li><p><code>p + 1</code> 是指p所指的int型变量的下一个int型变量地址,下一个是跨越了一整个int(4Byte). 指针变量支持自增自减 <code>p++,p--</code></p></li><li><p>对指针变量来说,其存储的地址的类型称为基类型. <code>int *p;</code> int是基类型,指针变量<code>p</code>不能存放<code>double,char</code>类型数据的地址.</p></li></ul><h2 id="指针与数组">指针与数组</h2><ul><li><code>&amp;a[0]</code> 首地址</li><li>数组名称也作为数组的首地址使用 <code>*p = a</code> 则指针变量 <code>p</code>的地址是 <code>&amp;a[0]</code></li><li>指针变量可以进行加减法,可以退出数组<code>a+i</code> 等同于 <code>&amp;a[i]</code></li><li>需要注意: <code>a+i</code>只是地址,访问需要加上<code>*</code>,变成<code>*(a+i)</code>才可以和<code>a[i]</code>等价. 所以有一种新颖的输入输出数组写法</li><li><code>c++ #include&lt;cstdio&gt; int main(){ int a[10]; for(int i = 0;i&lt;10;i++){ scanf(&quot;%d&quot;,a+i); } for(int i = 0;i&lt;10;i++){ printf(&quot;%d &quot;,*(a+i)); } return 0; }</code></li><li>另外指针变量支持自增自减,这样可以枚举数组中的元素: <code>c++ #include&lt;cstdio&gt; int main(){ int a[10] = {1,2,3,4,5,6,7,8,9,10}; for(int *p = a;p&lt;a+10;p++){ printf(&quot;%d &quot;,*p); } return 0; }</code></li><li>两个int型的指针相减,等价于在求两个指针之间相差几个int</li></ul><h2 id="使用指针变量作为函数参数">使用指针变量作为函数参数</h2><ul><li>把变量的地址传入函数,如果在函数中对这个地址中的元素进行改变,原先的数据就会确实被改变. 这种传递方式被称为 : 地址传递</li><li>经典例子 交换函数 <code>swap(int a, int b)</code> 不行,因为是单向一次性的值传递,只是参数一个副本,对这个副本的操作不会改变main函数中<code>a,b</code>的值. 只有在获取地址的情况下对元素进行操作,才能真正的修改变量.</li></ul><pre><code class="language-c++">#include&lt;cstdio&gt;
void swap(int *a,int *b){
    int temp = *a;
    *a = *b;
    *b = temp;
}
int main(){
    int a = 1, b = 2;
    int *p1 = &amp;a, *p2 = &amp;b;
    swap(p1,p2);
    printf(&quot;a = %d , b = %d\n&quot;, *p1, *p2);
    printf(&quot;a = %d , b = %d\n&quot;, a, b);
    return 0;
}
</code></pre><h2 id="引用">引用</h2><h3 id="引用的含义">引用的含义</h3><ul><li>引用是c++中一个强有力的语法.</li><li>不使用指针,达到修改传入参数的目的,使用引用,不会产生副本,而是给原变量起了个<strong>别名</strong>,相当于旧名字和新名字都是同一个人,且<strong>对引用变量的操作就是对原变量的操作</strong></li><li>引用的使用方法,只要在函数的参数类型后面加上<code>&amp;</code>就可以,加在<code>int</code>后或变量前都可以.示例: <code>c++ #include&lt;cstdio&gt; void change(int &amp;x){ x = 1; } int main(){ int x = 10; change(x); printf(&quot;%d\n&quot;,x); return 0; } 输出结果: 1</code> &gt; 当然函数的参数名和实际传入参数名可以不同 &gt; 要把引用的<code>&amp;</code>和取址运算符<code>&amp;</code>区别开来</li></ul><h3 id="指针的引用">指针的引用</h3><ul><li>由于引用是产生变量的别名,因此常量不可使用引用,不可以写<code>swap(&amp;a,&amp;b)</code>必须要用指针变量p1,p2存放&amp;a,&amp;b,然后把指针变量作为参数传入 <code>c++ #include&lt;cstdio&gt; void swap(int* &amp;p1,int* &amp;p2){ int* temp = p1; p1 = p2; p2 = temp; } int main(){ int a = 1, b = 2; int *p1 = &amp;a, *p2 = &amp;b; swap(p1,p2); printf(&quot;a = %d,b = %d\n&quot;,*p1, *p2); return 0; }</code></li></ul></article></div><div class="card-action card-action-links"><a class="btn btn-secondary" href="https://masonxu.xyz/tags/pat">PAT</a></div><div class="card-action"><div id="comment"></div><style>.v .vwrap .vheader .vinput:focus {
    border-bottom-color: #607d8b;
  }</style><script>(function (u1, u2, v) {
    var c = arguments - 1;
    function a(u) {
      var d = document, t = 'script', o = d.createElement(t), s = d.getElementsByTagName(t)[0];
      o.src = u;
      o.addEventListener('load', function () { --c || new Valine(v); }, false);
      s.parentElement.insertBefore(o, s);
    }
    a(u1); a(u2);
  })(window.baseURL + '/js/av-min.js', window.baseURL + '/js/Valine.min.js', {
    el: '#comment',
    notify: false,
    verify: false,
    appId: 'drenIDLMO3yTwiuCl7Hva9nq-gzGzoHsz',
    appKey: 'rfotKaw6cevwHhOR8FvhwPAp',
    placeholder: '写点什么吧...',
    path: window.location.pathname,
    avatar: 'retro'
  });</script></div><div class="pagination-single"><span class="pagination-item previous"><i class="material-icons">navigate_before</i> <a href="https://masonxu.xyz/posts/3.3datasturcturestack/" rel="prev">堆栈(Stack)</a></span></div></div></div></section></div></section><footer class="page-footer"><div class="container"><div class="inner"><div class="row"><div class="col l6 s12"><h5 class="white-text">Stone Cave</h5><p class="grey-text text-lighten-4">Theme <a href="https://github.com/stkevintan/canoe" target="_blank">canoe</a> designed by <a href="https://github.com/stkevintan" target="_blank">Kevin Tan</a> with ❤</p><ul class="slink"><li><a href="https://github.com/mason-xu" target="_blank" title="Github"><svg class="svg-icons svg-icons-github"><use xlink:href="#svg-icons-github"></use></svg></a></li><li><a href="https://twitter.com/kevinsfork" target="_blank" title="Google"><svg class="svg-icons svg-icons-google-plus3"><use xlink:href="#svg-icons-google-plus3"></use></svg></a></li><li><a href="http://weibo.com/maosnxu" target="_blank" title="Weibo"><svg class="svg-icons svg-icons-sina-weibo"><use xlink:href="#svg-icons-sina-weibo"></use></svg></a></li></ul></div><div class="col l4 offset-l2 s12"><h5 class="white-text">My Friends</h5><ul><li><a class="grey-text text-lighten-3" href="https://frantic1048.logdown.com/" target="_blank">Frantic1048</a></li><li><a class="grey-text text-lighten-3" href="https://hclmaster.github.io/" target="_blank">HclMaster</a></li><li><a class="grey-text text-lighten-3" href="https://whst.github.io/" target="_blank">WANG Hsü-Tung</a></li></ul></div></div></div></div><div class="footer-copyright"><div class="container"><div class="inner">Copyleft@Mason Xu</div></div></div></footer></main><script type="text/javascript" async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript" src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script><script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/go.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://cdn.bootcss.com/lunr.js/2.1.5/lunr.min.js"></script><script type="text/javascript" src="https://masonxu.xyz/js/index-d8a1f91919.js"></script></body></html>