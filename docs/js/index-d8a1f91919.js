!function(){"use strict";var t=new DOMParser,e={fetch:function(t,e){return void 0===e&&(e={}),null==e.credentials&&(e.credentials="same-origin"),fetch(t,e).then(function(t){if(t.status>=200&&t.status<300||304==t.status)return Promise.resolve(t);var e=new Error(t.statusText||""+t.status);return Promise.reject(e)})},domReady:function(t){document.addEventListener("DOMContentLoaded",t)},parseHtml:function(e){return t.parseFromString(e,"text/html").body.firstElementChild},get:function(t,e){return void 0===e&&(e=document),null==e?null:e.querySelector(t)},getAll:function(t,e){return void 0===e&&(e=document),null==e?[]:e.querySelectorAll(t)},remove:function(t){var e=t.parentElement;e&&e.removeChild(t)},css:function(t,e,n){if(null==n)return getComputedStyle(t)[e];t.style[e]=n},offset:function(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{top:e.top+window.pageYOffset-(n.clientTop||0),left:e.left+window.pageXOffset-(n.clientLeft||0)}},size:function(t,e){void 0===e&&(e=!1);var n,i,r=t.getBoundingClientRect(),o=window.getComputedStyle(t);return e?(n=r.width,i=r.height):(n=r.width-(parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth)),i=r.height-(parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth))),{width:n,height:i}}},n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},i=0;var r={};function o(t,e,o,a){var u=i++;r[u]=!0;var c=performance.now(),s=function(i){void 0===i&&(i=performance.now());var l=i-c;if(!r[u]||l>=e)return t(1),delete r[u],void(a&&a());t(o(l/e)),n(s)};return n(s),u}function a(t){!0===r[t]&&(r[t]=!1)}var u={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},c=window.baseURL,s=window.lunr;s.trimmer=function(t){if(e=t.str,/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e))return t;var e;return t.str=t.str.replace(/^\W+/,"").replace(/\W+$/,""),t};var l=null;function d(t){return function(){if(l)return l;var t=c+"/index.json";return l=e.fetch(t).then(function(t){return t.json()}).then(function(t){for(var e=Object.create(null),n=0,i=t;n<i.length;n++){var r=i[n];e[r.uri]=r}return{pageMap:e,index:s(function(){var e=this;this.field("title",{boost:10}),this.field("tags",{boost:5}),this.field("content"),this.ref("uri"),t.forEach(function(t){return e.add(t)})})}}).catch(function(t){console&&console.log("Error while getting lunr index file: ",t)})}().then(function(e){return e.index.search(t).map(function(t){return e.pageMap[t.ref]})})}var f=e.get(".navbar"),v=e.get(".nav-form",f),g=e.get("input",v),p=e.get(".search-result"),m=e.get("label",p),h=e.get("ul",p),b=e.get(".search-btn",f),w=e.get(".mobile-search"),y=e.get(".mobile-search-close"),L=e.get("input",w),E=e.get("label",w),C=e.get("ul",w);function O(t,e,n){t.value="";var i=function(t){e.textContent=t||"暂无搜索结果",n.innerHTML=""},r=function(){var e=(""+t.value).trim();e.length<2?i():(i("搜索中..."),d(e).then(function(t){return function(t){if(t&&t.length){Array.isArray(t)||(t=[t]);var e=t.reduce(function(t,e){return t+'<li><a href="'+c+e.uri+'">'+e.oriTitle+"</a></li>"},"");i("搜到了"+t.length+"项结果"),n.innerHTML=e}else i()}(t)}).catch(function(){return i("搜索失败, 请检查网络")}))};t.addEventListener("keyup",function(t){t.preventDefault(),t.stopPropagation(),r()})}var A,x,F,k,T,R=e.get(".toc-panel"),I=e.get("nav",R),H=(e.get("footer.page-footer"),e.get(".main-panel .container")),M=e.get("nav.navbar"),P=[].slice.call(e.getAll("li a",I));function Q(){F=e.offset(H),x=e.size(I,!0).height,k=e.size(M).height,T=P.map(function(t){var n=D(t);return null==n?0:Math.round(e.offset(n).top-k-20)}),A=!0}function D(t){var n=t.getAttribute("href").substr(1);return e.get('[id="'+n+'"]')}var z=null;function q(t){t.preventDefault(),t.stopPropagation();var n=t.target;if("A"===n.tagName){var i=e.get("a.active",I);i&&i.classList.remove("active"),A=!1,function(t,n){if(t.href&&(t=D(t)),null!=t){var i=window.pageYOffset,r=e.offset(t).top-k-i;z&&a(z),z=o(function(t){return window.scroll(0,i+r*t)},400,u.easeInCubic,n)}}(n,function(){A=!0,n.classList.add("active")})}}function S(){if(T){var t=e.size(H).height,n=window.pageYOffset,i=n+x+k,r=F.top+t,o="fixed"===getComputedStyle(I).position;if(o&&i+k>=r){var a=-R.getBoundingClientRect().top+r-i+"px";e.css(I,"cssText","position:absolute;top: "+a)}if(!o&&i+k<r&&e.css(I,"cssText",""),A){for(var u,c=0,s=T.length-1;c<s;)T[u=c+s+1>>1]===n?c=s=u:T[u]<n?c=u:s=u-1;P.forEach(function(t,e){e===c?t.classList.add("active"):t.classList.remove("active")})}}}var W=e.get(".navbar .button-collapse"),j=e.get("#"+W.getAttribute("data-activates")),B=e.parseHtml('<div id="sidenav-overlay" style="opacity:0"></div>'),N=null;function Y(){W&&j&&(W.addEventListener("click",function(t){t.preventDefault(),function(){var t=!!e.get("#sidenav-overlay");t&&"1"===B.style.opacity||(B.style.opacity="0",t||document.body.appendChild(B),N&&a(N),N=o(function(t){return B.style.opacity=""+t},200,u.easeOutCubic))}(),document.body.classList.add("mobile-sidebar-active")}),B.addEventListener("click",function(t){t.stopPropagation(),document.body.classList.remove("mobile-sidebar-active"),function(){var t=e.get("#sidenav-overlay");null!==t&&("0"!==t.style.opacity?(N&&a(N),N=o(function(e){return t.style.opacity=""+(1-e)},200,u.easeOutCubic,function(){return e.remove(t)})):e.remove(t))}()}))}var U=e.get(".navbar ul.tabs"),X=e.getAll("li.tab",U),$=e.parseHtml('<li class="indicator"></li>');function G(t){void 0===t&&(t=e.get("a.active",U));var n=0,i=0;if(null!=t){var r=t.parentElement;n=r.offsetLeft,i=e.size(r).width}e.css($,"cssText","left:"+n+"px;width:"+i+"px")}var J=window.getHitokoto,K=e.get(".splash p.desc"),V="https://sslapi.hitokoto.cn";function Z(){K&&J&&e.fetch(V).then(function(t){return t.json()}).then(function(t){console&&console.log("hitokoto detail : ",t),n=function(){K.innerHTML=t.hitokoto+" --- <cite>"+t.from+"</cite>",o(function(t){return e.css(K,"opacity",""+t)},300,u.easeInCubic)},o(function(t){return e.css(K,"opacity",""+(1-t))},300,u.easeOutCubic,n);var n})}var _=window.baseURL;e.domReady(function(){U&&X&&X.length&&(U.appendChild($),G(),U.addEventListener("mouseover",function(t){t.stopPropagation();var e=t.target;"A"===e.tagName&&G(e)}),U.addEventListener("mouseout",function(t){t.stopPropagation(),"A"===t.target.tagName&&G()})),null!==I&&(I.addEventListener("click",q),window.addEventListener("scroll",S),["resize","load"].map(function(t){window.addEventListener(t,function(){Q(),S()})}),Q(),S()),function(){if(b&&v&&w){var t=!1;v.addEventListener("click",function(e){t||(t=!0,f.classList.add("search-active"))}),v.addEventListener("submit",function(t){t.preventDefault(),t.stopPropagation()}),document.addEventListener("click",function(e){t&&v!==e.target&&!v.contains(e.target)&&(t=!1,f.classList.remove("search-active"))}),O(g,m,h);var n=null;b.addEventListener("click",function(){e.css(w,"opacity","0"),document.body.classList.add("mobile-search-active"),L.focus(),n&&a(n),n=o(function(t){return e.css(w,"opacity",""+t)},200,u.easeOutCubic)}),y.addEventListener("click",function(){n&&a(n),n=o(function(t){return e.css(w,"opacity",""+(1-t))},200,u.easeOutCubic,function(){return document.body.classList.remove("mobile-search-active")})}),O(L,E,C)}}(),function(){var t=e.get(".navbar .term-btn"),n=e.get(".taxonomy"),i=e.get(".taxonomy-panel",n);t&&i&&(t.addEventListener("click",function(t){t.preventDefault(),n.classList.toggle("active")}),document.addEventListener("click",function(e){i===e.target||i.contains(e.target)||t===e.target||t.contains(e.target)||n.classList.remove("active")}))}(),Y(),function(){var t=_+"/svg/icon.svg",n=e.get("body"),i=e.parseHtml('<div style="display:none"></div>');n.appendChild(i),e.fetch(t).then(function(t){return t.text()}).then(function(t){return i.innerHTML=t})}(),function(){for(var t=e.getAll(".reveal"),n=0;n<t.length;n++)t[n].classList.add("enter")}(),Z()})}();
